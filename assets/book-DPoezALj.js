import{H as t,a as e,i as n}from"./header-BTcOR6oH.js";const a=document.querySelector(".site-header");a&&new t(a,e);const o=new URLSearchParams(window.location.search).get("id");function s(t,e){var a;const o=document.getElementById("book-content");if(!o)return;const s=t.cover||(null==(a=t.media)?void 0:a.cover)||`images/books/${t.slug}/cover.png`;o.innerHTML=`\n    <div class="book-header">\n      <div style="max-width: 400px;">\n        <img\n          src="${s}"\n          alt="${r(t.title[e])}"\n          class="book-cover-large"\n          loading="eager"\n        >\n      </div>\n      <div class="book-info">\n        <h1 class="book-title">${r(t.title[e])}</h1>\n        <p class="book-author">\n          <strong>${n.t("author")}:</strong> ${r(t.author)}\n        </p>\n\n        ${t.quote&&t.quote[e]?`\n          <blockquote class="book-quote">\n            ${r(t.quote[e])}\n          </blockquote>\n        `:""}\n\n        ${t.description&&t.description[e]?`\n          <p style="line-height: var(--line-height-relaxed); color: var(--color-text-medium);">\n            ${r(t.description[e])}\n          </p>\n        `:""}\n\n        <div class="book-meta">\n          ${t.pages?`\n            <div class="meta-item">\n              <div class="meta-label">${n.t("pages")}</div>\n              <div class="meta-value">${t.pages}</div>\n            </div>\n          `:""}\n          ${t.price?`\n            <div class="meta-item">\n              <div class="meta-label">${n.t("price")}</div>\n              <div class="meta-value">${t.price} ${t.currency||"₪"}</div>\n            </div>\n          `:""}\n        </div>\n\n        <div style="display: flex; gap: var(--space-md); margin-top: var(--space-lg); flex-wrap: wrap;">\n          <a href="purchase.html?book=${t.slug}" class="btn-primary">\n            ${n.t("buyNow")}\n          </a>\n          <a href="/" class="btn-secondary">\n            ${n.t("backToCatalog")}\n          </a>\n        </div>\n      </div>\n    </div>\n\n    ${t.chapters&&t.chapters.length>0?`\n      <div class="table-of-contents">\n        <h2>${n.t("tableOfContents")}</h2>\n        <ul class="toc-list" role="list">\n          ${t.chapters.map((n,a)=>`\n            <li class="toc-item" role="listitem">\n              <a href="chapter.html?book=${t.slug}&chapter=${n.slug}">\n                <span class="chapter-number">${a+1}</span>\n                <span class="chapter-title-text">${r(n.title[e])}</span>\n              </a>\n            </li>\n          `).join("")}\n        </ul>\n      </div>\n    `:""}\n  `}function i(t){const e=document.getElementById("book-content");e&&(e.innerHTML=`\n      <div style="text-align: center; padding: var(--space-3xl); color: var(--color-error);">\n        <h2>${t}</h2>\n        <p style="margin-top: var(--space-md);">\n          <a href="/" class="btn-primary">${n.t("backToCatalog")}</a>\n        </p>\n      </div>\n    `)}function r(t){if(!t)return"";const e=document.createElement("div");return e.textContent=t,e.innerHTML}o?async function(t){try{const n=await e.getBook(t),a=e.getState().currentLanguage;document.title=`${n.title[a]} - ספרי גאולה`,document.querySelector('meta[name="description"]').content=n.description[a]||"";const o=document.getElementById("breadcrumb-title");o&&(o.textContent=n.title[a]);const i=document.getElementById("book-schema");if(i){const t={"@context":"https://schema.org","@type":"Book",name:n.title[a],author:{"@type":"Person",name:n.author},numberOfPages:n.pages,inLanguage:a,datePublished:n.publishedDate,description:n.description[a]};i.textContent=JSON.stringify(t,null,2)}s(n,a),document.addEventListener("app:languageChange",()=>{const t=e.getState().currentLanguage;document.title=`${n.title[t]} - ספרי גאולה`,o.textContent=n.title[t],s(n,t)})}catch(a){console.error("Error loading book:",a),i(n.t("errors.bookNotFound"))}}(o):i("לא צוין מזהה ספר");
